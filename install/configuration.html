<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-install/configuration">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">Configuration Options | RKE 2</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rancher.github.io//rke2-docs/install/configuration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuration Options | RKE 2"><meta data-rh="true" name="description" content="This page focuses on the configuration options available when setting up RKE2:"><meta data-rh="true" property="og:description" content="This page focuses on the configuration options available when setting up RKE2:"><link data-rh="true" rel="icon" href="/rke2-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rancher.github.io//rke2-docs/install/configuration"><link data-rh="true" rel="alternate" href="https://rancher.github.io//rke2-docs/install/configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://rancher.github.io//rke2-docs/install/configuration" hreflang="x-default"><link rel="stylesheet" href="/rke2-docs/assets/css/styles.a104b84c.css">
<link rel="preload" href="/rke2-docs/assets/js/runtime~main.c978a095.js" as="script">
<link rel="preload" href="/rke2-docs/assets/js/main.a8254415.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rke2-docs/"><div class="navbar__logo"><img src="/rke2-docs/img/logo-horizontal-rke2.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/rke2-docs/img/logo-horizontal-rke2.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/rke2-docs/">Docs</a><a href="https://github.com/rancher/rke2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rke2-docs/install/quickstart">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/quickstart">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/requirements">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rke2-docs/install/configuration">Configuration Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/network_options">Network Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/ha">High Availability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/methods">Installation Methods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/containerd_registry_configuration">Containerd Registry Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/airgap">Air-Gap Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/windows_airgap">Windows Air-Gap Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/linux_uninstall">Linux Uninstall</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rke2-docs/install/windows_uninstall">Windows Uninstall</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rke2-docs/upgrade">Upgrades</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rke2-docs/security/about_hardened_images">Security</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/cluster_access">Cluster Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/backup_restore">Etcd Backup and Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/helm">Helm Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/advanced">Advanced Options and Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rke2-docs/reference/linux_agent_config">Reference</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rke2-docs/known_issues">Known Issues and Limits</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rke2-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configuration Options</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuration Options</h1></header><p>This page focuses on the configuration options available when setting up RKE2:</p><ul><li><a href="#configuring-the-linux-installation-script">Configuring the Linux installation script</a></li><li><a href="#configuring-the-windows-installation-script">Configuring the Windows installation script</a></li><li><a href="#configuring-rke2-server-nodes">Configuring RKE2 server nodes</a></li><li><a href="#configuring-linux-rke2-agent-nodes">Configuring Linux RKE2 agent nodes</a></li><li><a href="#configuring-windows-rke2-agent-nodes">Configuring Windows RKE2 agent nodes</a></li><li><a href="#configuration-file">Using the configuration file</a></li><li><a href="#configuring-when-running-the-binary-directly">Configuring when running the binary directly</a></li></ul><p>The primary way to configure RKE2 is through its <a href="#configuration-file">config file</a>. Command line arguments and environment variables are also available, but RKE2 is installed as a systemd service and thus these are not as easy to leverage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-linux-installation-script">Configuring the Linux Installation Script<a class="hash-link" href="#configuring-the-linux-installation-script" title="Direct link to heading">​</a></h3><p>As mentioned in the <a href="/rke2-docs/install/quickstart">Quick-Start Guide</a>, you can use the installation script available at <a href="https://get.rke2.io" target="_blank" rel="noopener noreferrer">https://get.rke2.io</a> to install RKE2 as a service.</p><p>The simplest form of this command is running, as root user or through <code>sudo</code>, as follows:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># curl -sfL https://get.rke2.io | sudo sh -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -sfL https://get.rke2.io | sh -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When using this method to install RKE2, the following environment variables can be used to configure the installation:</p><table><thead><tr><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>INSTALL_RKE2_VERSION</code></td><td>Version of RKE2 to download from GitHub. Will attempt to download the latest release from the <code>stable</code> channel if not specified. <code>INSTALL_RKE2_CHANNEL</code> should also be set if installing on an RPM-based system and the desired version does not exist in the <code>stable</code> channel.</td></tr><tr><td><code>INSTALL_RKE2_TYPE</code></td><td>Type of systemd service to create, can be either &quot;server&quot; or &quot;agent&quot; Default is &quot;server&quot;.</td></tr><tr><td><code>INSTALL_RKE2_CHANNEL_URL</code></td><td>Channel URL for fetching RKE2 download URL. Defaults to <code>https://update.rke2.io/v1-release/channels</code>.</td></tr><tr><td><code>INSTALL_RKE2_CHANNEL</code></td><td>Channel to use for fetching RKE2 download URL. Defaults to <code>stable</code>. Options include: <code>stable</code>, <code>latest</code>, <code>testing</code>.</td></tr><tr><td><code>INSTALL_RKE2_METHOD</code></td><td>Method of installation to use. Default is on RPM-based systems <code>rpm</code>, all else <code>tar</code>.</td></tr></tbody></table><p>This installation script is straight-forward and will do the following:</p><ol><li>Obtain the desired version to install based on the above parameters. If no parameters are supplied, the latest official release will be used.</li><li>Determine and execute the installation method. There are two methods: rpm and tar. If the <code>INSTALL_RKE2_METHOD</code> variable is set, that will be respected, Otherwise, <code>rpm</code> will be used on operating systems that use this package management system. On all other systems, tar will be used. In the case of the tar method, the script will simply unpack the tar archive associated with the desired release. In the case of rpm, a yum repository will be set up and the rpm will be installed using yum.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-windows-installation-script">Configuring the Windows Installation Script<a class="hash-link" href="#configuring-the-windows-installation-script" title="Direct link to heading">​</a></h3><p><strong>Windows Support is currently Experimental as of v1.21.3+rke2r1</strong>
<strong>Windows Support requires choosing Calico as the CNI for the RKE2 cluster</strong></p><p>As mentioned in the <a href="/rke2-docs/install/quickstart">Quick-Start Guide</a>, you can use the installation script available at <a href="https://github.com/rancher/rke2/blob/master/install.ps1" target="_blank" rel="noopener noreferrer">https://github.com/rancher/rke2/blob/master/install.ps1</a> to install RKE2 on a Windows Agent Node.</p><p>The simplest form of this command is as follows:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Invoke-WebRequest -Uri https://raw.githubusercontent.com/rancher/rke2/master/install.ps1 -Outfile install.ps1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When using this method to install the Windows RKE2 agent, the following parameters can be passed to configure the installation script:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SYNTAX</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">install.ps1 [[-Channel] &lt;String&gt;] [[-Method] &lt;String&gt;] [[-Type] &lt;String&gt;] [[-Version] &lt;String&gt;] [[-TarPrefix] &lt;String&gt;] [-Commit] [[-AgentImagesDir] &lt;String&gt;] [[-ArtifactPath] &lt;String&gt;] [[-ChannelUrl] &lt;String&gt;] [&lt;CommonParameters&gt;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">OPTIONS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-Channel           Channel to use for fetching RKE2 download URL (Default: &quot;stable&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-Method            The installation method to use. Currently tar or choco installation supported. (Default: &quot;tar&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-Type              Type of RKE2 service. Only the &quot;agent&quot; type is supported on Windows. (Default: &quot;agent&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-Version           Version of rke2 to download from Github</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-TarPrefix         Installation prefix when using the tar installation method. (Default: `C:/usr/local` unless `C:/usr/local` is read-only or has a dedicated mount point, in which case `C:/opt/rke2` is used instead)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-Commit            (experimental/agent) Commit of RKE2 to download from temporary cloud storage. If set, this forces `--Method=tar`. Intended for development purposes only.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-AgentImagesDir    Installation path for airgap images when installing from CI commit. (Default: `C:/var/lib/rancher/rke2/agent/images`)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-ArtifactPath      If set, the install script will use the local path for sourcing the `rke2.windows-$SUFFIX` and `sha256sum-$ARCH.txt` files rather than the downloading the files from GitHub. Disabled by default.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-windows-installation-script-usage-examples">Other Windows Installation Script Usage Examples<a class="hash-link" href="#other-windows-installation-script-usage-examples" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-latest-version-instead-of-stable">Install the Latest Version Instead of Stable<a class="hash-link" href="#install-the-latest-version-instead-of-stable" title="Direct link to heading">​</a></h4><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Invoke-WebRequest -Uri https://raw.githubusercontent.com/rancher/rke2/master/install.ps1 -Outfile install.ps1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./install.ps1 -Channel Latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-latest-version-using-tar-installation-method">Install the Latest Version using Tar Installation Method<a class="hash-link" href="#install-the-latest-version-using-tar-installation-method" title="Direct link to heading">​</a></h4><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Invoke-WebRequest -Uri https://raw.githubusercontent.com/rancher/rke2/master/install.ps1 -Outfile install.ps1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./install.ps1 -Channel Latest -Method Tar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-rke2-server-nodes">Configuring RKE2 Server Nodes<a class="hash-link" href="#configuring-rke2-server-nodes" title="Direct link to heading">​</a></h3><p>For details on configuring the RKE2 server, refer to the <a href="/rke2-docs/reference/server_config">server configuration reference.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-linux-rke2-agent-nodes">Configuring Linux RKE2 Agent Nodes<a class="hash-link" href="#configuring-linux-rke2-agent-nodes" title="Direct link to heading">​</a></h3><p>For details on configuring the RKE2 agent, refer to the <a href="/rke2-docs/reference/linux_agent_config">agent configuration reference.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-windows-rke2-agent-nodes">Configuring Windows RKE2 Agent Nodes<a class="hash-link" href="#configuring-windows-rke2-agent-nodes" title="Direct link to heading">​</a></h3><p>For details on configuring the RKE2 Windows agent, refer to the <a href="/rke2-docs/reference/windows_agent_config">Windows agent configuration reference.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-file">Configuration File<a class="hash-link" href="#configuration-file" title="Direct link to heading">​</a></h3><p>By default, RKE2 will launch with the values present in the YAML file located at <code>/etc/rancher/rke2/config.yaml</code>.</p><p>An example of a basic <code>server</code> config file is below:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">write-kubeconfig-mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0644&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">tls-san</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo.local&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">node-label</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo=bar&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;something=amazing&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The configuration file parameters map directly to CLI arguments, with repeatable CLI arguments being represented as YAML lists.</p><p>An identical configuration using solely CLI arguments is shown below to demonstrate this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rke2 server </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --write-kubeconfig-mode </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0644&quot;</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tls-san </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo.local&quot;</span><span class="token plain">             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --node-label </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo=bar&quot;</span><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --node-label </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;something=amazing&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is also possible to use both a configuration file and CLI arguments.  In these situations, values will be loaded from both sources, but CLI arguments will take precedence.  For repeatable arguments such as <code>--node-label</code>, the CLI arguments will overwrite all values in the list.</p><p>Finally, the location of the config file can be changed either through the cli argument <code>--config FILE, -c FILE</code>, or the environment variable <code>$RKE2_CONFIG_FILE</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-when-running-the-binary-directly">Configuring when Running the Binary Directly<a class="hash-link" href="#configuring-when-running-the-binary-directly" title="Direct link to heading">​</a></h3><p>As stated, the installation script is primarily concerned with configuring RKE2 to run as a service. If you choose to not use the script, you can run RKE2 simply by downloading the binary from our <a href="https://github.com/rancher/rke2/releases/latest" target="_blank" rel="noopener noreferrer">release page</a>, placing it on your path, and executing it. The RKE2 binary supports the following commands:</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>rke2 server</code></td><td>Run the RKE2 management server, which will also launch the Kubernetes control plane components such as the API server, controller-manager, and scheduler. Only Supported on Linux.</td></tr><tr><td><code>rke2 agent</code></td><td>Run the RKE2 node agent. This will cause RKE2 to run as a worker node, launching the Kubernetes node services <code>kubelet</code> and <code>kube-proxy</code>. Supported on Linux and Windows.</td></tr><tr><td><code>rke2 help</code></td><td>Shows a list of commands or help for one command</td></tr></tbody></table><p>The <code>rke2 server</code> and <code>rke2 agent</code> commands have additional configuration options that can be viewed with <code>rke2 server --help</code> or <code>rke2 agent --help</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rke2-docs/edit/main/docs/install/configuration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-11-10T22:15:02.000Z">11/10/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/rke2-docs/install/requirements"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Requirements</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rke2-docs/install/network_options"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Network Options</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-the-linux-installation-script" class="table-of-contents__link toc-highlight">Configuring the Linux Installation Script</a></li><li><a href="#configuring-the-windows-installation-script" class="table-of-contents__link toc-highlight">Configuring the Windows Installation Script</a></li><li><a href="#other-windows-installation-script-usage-examples" class="table-of-contents__link toc-highlight">Other Windows Installation Script Usage Examples</a></li><li><a href="#configuring-rke2-server-nodes" class="table-of-contents__link toc-highlight">Configuring RKE2 Server Nodes</a></li><li><a href="#configuring-linux-rke2-agent-nodes" class="table-of-contents__link toc-highlight">Configuring Linux RKE2 Agent Nodes</a></li><li><a href="#configuring-windows-rke2-agent-nodes" class="table-of-contents__link toc-highlight">Configuring Windows RKE2 Agent Nodes</a></li><li><a href="#configuration-file" class="table-of-contents__link toc-highlight">Configuration File</a></li><li><a href="#configuring-when-running-the-binary-directly" class="table-of-contents__link toc-highlight">Configuring when Running the Binary Directly</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/rke2-docs/assets/js/runtime~main.c978a095.js"></script>
<script src="/rke2-docs/assets/js/main.a8254415.js"></script>
</body>
</html>